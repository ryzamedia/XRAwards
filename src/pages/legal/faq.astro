---
/**
 * FAQ Page
 * URL: /legal/faq
 * Frequently Asked Questions about the XR Awards
 */
export const prerender = true;

import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import CTAFooter from '../../components/CTAFooter.astro';
import { Image } from 'astro:assets';
import { getR2ImageUrl } from '../../utils/r2';
import { getCTAButton, getEventPhase } from '../../utils/date-checker';
import { supabase } from '../../utils/supabase';

// Get images for FAQ sections
const whatsNewImage = getR2ImageUrl('/images/2025/10/apple-holding-2024-trophy_1760204737832.jpg');
const datesFeesImage = getR2ImageUrl('/images/2025/10/obsidian-award-winner-2024_1760204866862.png');
const entryKitImage = getR2ImageUrl('/images/2025/10/xr-head-mounted-display-of-the-year-winner-2024_1760207686185.jpg');
const juryJudgingImage = getR2ImageUrl('/images/2025/10/outstanding-xr-company-of-the-year-winner-2024_1760207732668.jpg');
const trophiesImage = getR2ImageUrl('/images/2025/10/xr-game-of-the-year-winner-2024_1760207777680.jpg');
const attendeeGuideImage = getR2ImageUrl('/images/2025/10/xr-awards-hero_1760202291581.png');

// Fetch active event details for dynamic links
const { data: eventDetails } = await supabase
  .from('event_details')
  .select('*')
  .eq('is_active', true)
  .single();

// Get current event phase and CTA button
const eventPhase = await getEventPhase();
const ctaButton = await getCTAButton('header');

// FAQ links with dynamic and updated URLs
const faqLinks = [
  {
    title: `What's new for ${eventDetails?.event_year || '2025'}`,
    image: whatsNewImage,
    href: eventDetails?.slug ? `/${eventDetails.slug}/` : '/register-interest/',
  },
  {
    title: "Dates & Fees",
    image: datesFeesImage,
    href: eventDetails?.nomination_portal_url || 'https://app.aixr.org/e/20a6e09d-7e86-488d-8436-1cd162d0f5df',
  },
  {
    title: "Entry kit",
    image: entryKitImage,
    href: '/nominate/entry-kit/',
  },
  {
    title: "Jury & Judging",
    image: juryJudgingImage,
    href: '/judges/',
  },
  {
    title: "Duplicate Trophies",
    image: trophiesImage,
    href: '/store/',
  },
  {
    title: "Attendee Guide",
    image: attendeeGuideImage,
    href: '/travel-accommodation/',
  },
];
---

<Layout
  title="Frequently Asked Questions - AIXR XR Awards"
  description="Everything you need to know to prepare for the XR Awards. Find answers to common questions about dates, fees, entry requirements, judging, and more."
>
  <Header />

  <main class="min-h-screen bg-white">
    <!-- Page Header -->
    <section class="relative bg-[#0E1022] pt-32 md:pt-40 pb-20 md:pb-32 overflow-hidden">
      <!-- Decorative Background Rings -->
      <div class="absolute -left-20 md:left-0 top-1/4 -translate-y-1/2 -translate-x-1/2 w-[300px] h-[300px] md:w-[450px] md:h-[450px]">
        <div class="absolute inset-0 rounded-full" style="background: linear-gradient(180deg, #E91E8C 0%, #5D1635 100%);"></div>
        <div class="absolute top-[55px] left-[55px] right-[55px] bottom-[55px] md:top-[75px] md:left-[75px] md:right-[75px] md:bottom-[75px] rounded-full bg-[#0E1022]"></div>
      </div>
      <div class="absolute -right-20 md:right-0 top-3/4 -translate-y-1/2 translate-x-1/2 w-[300px] h-[300px] md:w-[450px] md:h-[450px]">
        <div class="absolute inset-0 rounded-full" style="background: linear-gradient(180deg, #00D4D8 0%, #0A4B52 100%);"></div>
        <div class="absolute top-[55px] left-[55px] right-[55px] bottom-[55px] md:top-[75px] md:left-[75px] md:right-[75px] md:bottom-[75px] rounded-full bg-[#0E1022]"></div>
      </div>

      <!-- Content -->
      <div class="relative z-10 max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="page-title text-white mb-6">
          Frequently Asked Questions
        </h1>

        <!-- Decorative Dots -->
        <div class="flex justify-center gap-2 mb-6">
          <span class="w-1.5 h-1.5 rounded-full bg-cyan-400"></span>
          <span class="w-1.5 h-1.5 rounded-full bg-cyan-400"></span>
          <span class="w-1.5 h-1.5 rounded-full bg-cyan-400"></span>
          <span class="w-1.5 h-1.5 rounded-full bg-cyan-400"></span>
          <span class="w-1.5 h-1.5 rounded-full bg-cyan-400"></span>
        </div>

        <p class="page-subtitle text-white">
          {eventPhase.phase === 'post-ceremony' 
            ? 'The XR Awards Gala has concluded. View the winners and prepare for next year.'
            : 'Everything you need to know to prepare for the XR Awards.'
          }
        </p>
      </div>
    </section>

    <!-- Essential Information Section -->
    <section class="py-16 md:py-24 bg-white">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-left mb-12">
          <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-4">Essential Information</h2>
          <p class="text-lg text-gray-600">Key details and support from the XR awards</p>
        </div>

        <!-- FAQ Cards Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {faqLinks.map((faq) => (
            <a href={faq.href} target="_blank" rel="noopener noreferrer" class="group relative">
              <div class="aspect-video overflow-hidden rounded-lg">
                <Image 
                  src={faq.image} 
                  alt={faq.title}
                  class="w-full h-full object-cover"
                  width={600}
                  height={340}
                />
              </div>
              <div class="feature-banner absolute bottom-4 left-4 right-4 rounded-md p-4">
                <div class="flex items-start justify-between">
                  <p class="text-white text-lg font-medium pr-3 font-['Jura']">{faq.title}</p>
                  <svg class="w-6 h-6 text-white flex-shrink-0 feature-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 19L19 5M19 5H7M19 5V17" />
                  </svg>
                </div>
              </div>
            </a>
          ))}
        </div>
      </div>
    </section>

    <!-- Additional Help Section -->
    <section class="py-16 md:py-24 bg-gray-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-6">Still have questions?</h2>
        <p class="text-lg text-gray-700 mb-8">
          If you can't find the answer you're looking for in our FAQ sections, our support team is here to help.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          {eventPhase.phase === 'post-ceremony' ? (
            <>
              <a 
                href={ctaButton.href}
                class="inline-flex items-center justify-center px-8 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition-colors"
              >
                {ctaButton.text}
              </a>
              <a 
                href="/about-xr-awards/"
                class="inline-flex items-center justify-center px-8 py-3 bg-white text-gray-900 font-medium rounded-lg border-2 border-gray-300 hover:border-gray-400 transition-colors"
              >
                Learn More
              </a>
            </>
          ) : (
            <a 
              href="mailto:awards@aixr.org"
              class="inline-flex items-center justify-center px-8 py-3 bg-[#4923EB] text-white font-medium rounded-lg hover:bg-[#3a1bb8] transition-colors"
            >
              Contact Support
            </a>
          )}
        </div>
      </div>
    </section>

    <!-- CTA Footer -->
    <CTAFooter />
  </main>

  <Footer />
</Layout>

<style>
  .page-title {
    font-size: 35px;
    font-weight: 600;
  }

  .page-subtitle {
    font-size: 16px;
    font-weight: 300;
    font-family: "IBM Plex Mono", monospace;
  }

  .feature-banner {
    background: linear-gradient(135deg, #4A1B5C 0%, #3A1447 100%);
    position: relative;
    z-index: 1;
  }

  .feature-banner::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #5A2B6C 0%, #4A1857 100%);
    border-radius: inherit;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: -1;
  }

  .group:hover .feature-banner::before {
    opacity: 1;
  }

  .feature-arrow {
    transition: transform 0.3s ease;
  }

  .group:hover .feature-arrow {
    transform: rotate(45deg);
  }
</style>

